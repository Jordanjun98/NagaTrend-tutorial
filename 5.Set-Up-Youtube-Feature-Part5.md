#   Setup Youtube Feature | Part 5

### Generate a command

Create a command that can pass the data from youtube api. This command will create a new command class in the app/Console/Commands directory. Run the command with:

```
php artisan make:command SendYoutubeData
```

---

### Command structure

After generating your command, you should fill in the `signature` and `description` properties of the class, which will be used when displaying your command on the console based when you enter `php artisan`.

```
/**
     * The name and signature of the console command.
     *
     * @var string
     */
    protected $signature = 'make:youtubeData';

    /**
     * The console command description.
     *
     * @var string
     */
    protected $description = 'Pass youtube data';

    /**
     * Create a new command instance.
     *
     * @return void
     */
```

The `handle` method is use to perform an task when the `php artisan make:method` command is enter. Next, the

```
    public function handle()
    {
        $videoLists = Youtube::getPopularVideos('my');
    
        $limits = array_splice($videoLists, 3, 6);
        $url = "https://www.youtube.com/watch?v=";
    
        $region ="Asia/Kuala_Lumpur";
    
        $youtubeVideo = new YoutubeVideo();
    
        $currentDateTime = Carbon::now(new \DateTimeZone("Asia/Kuala_Lumpur"));
        $currentDate = current_date($currentDateTime);
    
        foreach($limits as $limit){  
          $youtubeVideo->create([
            "video_title"  => $limit->snippet->title,
            "views"   => $limit->statistics->viewCount,
            "likes"   => $limit->statistics->likeCount,
            "comments" => $limit->statistics->commentCount,
            "video_url" => $url.$limit->id,
            "date" => $currentDate,
            "day" =>  $currentDateTime->format('l')
          ]);
        }

    }
```

```
$videoList = Youtube::getPopularVideos('my');
```

is to get popular videos in a country and return an array of PHP objects. 


###  Handling the POST request in the YoutubeVideoController

```
$youtubeVideo = new YoutubeVideo();
```

The data is pass one by one from the `$limits` array and save into the database based on the `YoutubeVideo` model

```
  foreach($limits as $limit){  
    $youtubeVideo->create([
      "video_title"  => $limit->snippet->title,
      "views"   => $limit->statistics->viewCount,
      "likes"   => $limit->statistics->likeCount,
      "comments" => $limit->statistics->commentCount,
      "video_url" => $url.$limit->id,
      "date" => $currentDate,
      "day" =>  $currentDateTime->format('l')
    ]);
  }
```








 





